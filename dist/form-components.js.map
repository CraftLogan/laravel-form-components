{"version":3,"file":"form-components.js","sources":["../resources/js/util/findLastIndex.js","../resources/js/components/index.js","../resources/js/components/custom-select.js"],"sourcesContent":["export default (array, predicate) => {\n    let l = array.length;\n    while (l--) {\n        if (predicate(array[l], l, array)) {\n            return l;\n        }\n    }\n\n    return -1;\n};\n","import customSelect from './custom-select';\n\nwindow.customSelect = customSelect;\n","/*\n * Custom Select Component Definition.\n *\n * Note: Not using polyfills for functions such as Array.from()\n * since I use Livewire, and Livewire already includes polyfills\n * for those functions. If you don't use Livewire, you should\n * make sure are pulling in those polyfills.\n */\n\nimport findLastIndex from '../util/findLastIndex';\n\nexport default function customSelect(state) {\n    return {\n        ...state,\n\n        display: '',\n        options: [],\n        currentIndex: -1,\n        query: '',\n        previousDisplay: '',\n        needsHiddenInput: false,\n\n        get activeDescendant() {\n            return this.currentIndex > -1\n                ? `listbox-${this.selectId}-item-${this.currentIndex}`\n                : null;\n        },\n\n        get hasValue() {\n            return this.multiple\n                ? this.value.length > 0\n                : Boolean(this.value);\n        },\n\n        get enabledLength() {\n            return this.options.filter(o => ! o.disabled && ! o.hidden).length;\n        },\n\n        get placeholderMarkup() {\n            return `<span class=\"custom-select--placeholder\">${this.placeholder}</span>`;\n        },\n\n        init($watch) {\n            if (! this.$refs.container || ! this.$refs.menu) {\n                // Keep trying to init until we see them...\n                setTimeout(() => this.init($watch), 250);\n\n                return;\n            }\n\n            this.options = this.parseOptions();\n\n            if (this.value && this.multiple && ! Array.isArray(this.value)) {\n                this.value = [this.value];\n            }\n\n            this.updateDisplay(this.value);\n\n            $watch('value', value => {\n                this.updateDisplay(value);\n            });\n            $watch('query', value => this.filter(value));\n            $watch('wireFilter', () => {\n                this.$nextTick(() => {\n                    this.options = this.parseOptions();\n                });\n            });\n\n            $watch('selected', value => this.onSelectedChanged(value));\n\n            this.needsHiddenInput = this.multiple && this.wireFilter !== undefined;\n        },\n\n        filter(value) {\n            const optionsToHide = this.options\n                .filter(o => {\n                    o.hidden = false;\n\n                    return ! String(o.value).toLowerCase().includes(value) && ! String(o.text).toLowerCase().includes(value);\n                })\n                .map(o => {\n                    o.hidden = true;\n\n                    return this.optionIndex(o.value);\n                });\n\n            if (! optionsToHide.length) {\n                Array.from(this.$refs.menu.children).forEach(child => child.classList.remove('hidden'));\n\n                return;\n            }\n\n            Array.from(this.$refs.menu.children)\n                .forEach(child => {\n                    const index = Number(child.dataset.index);\n\n                    if (optionsToHide.includes(index)) {\n                        child.classList.add('hidden');\n                    } else {\n                        child.classList.remove('hidden');\n                    }\n                });\n        },\n\n        parseOptions() {\n            return Array.from(this.$refs.menu.children)\n                .filter(child => child.classList.contains('custom-select--option'))\n                .map((child, index) => {\n                    child.setAttribute('data-index', index);\n                    child.setAttribute('id', `listbox-${this.selectId}-item-${index}`);\n\n                    return JSON.parse(child.dataset.option)\n                });\n        },\n\n        isChosen(value) {\n            if (this.multiple) {\n                if (! Array.isArray(this.value)) {\n                    this.value = [this.value];\n                }\n\n                // Using \"some\" so I can properly check the values.\n                return this.value.some(v => String(v) === value);\n            }\n\n            return value === String(this.value);\n        },\n\n        chooseForMultiple(value) {\n            if (! this.isChosen(value)) {\n                this.value.push(value);\n            } else if (this.optional || this.value.length > 1) {\n                this.value.splice(this.value.indexOf(String(value)), 1);\n                this.updateDisplay(this.value);\n            }\n\n            this.setHiddenInputSelection(this.value);\n\n            if (this.value.length === 0) {\n                this.closeMenu();\n            }\n        },\n\n        setHiddenInputSelection(value) {\n            if (! this.needsHiddenInput) {\n                return;\n            }\n\n            window.sessionStorage.setItem(`cs-${this.selectId}-selected`, JSON.stringify(value));\n        },\n\n        clear() {\n            if (! this.needsHiddenInput) {\n                return this.value = this.multiple ? [] : null;\n            }\n\n            this.value.forEach(v => this.choose(v));\n\n            window.sessionStorage.removeItem(`cs-${this.selectId}-selected`);\n            window.sessionStorage.setItem(`cs-${this.selectId}-cleared`, '1');\n        },\n\n        choose(value, $event) {\n            if (! this.shouldChoose(value, $event)) {\n                return;\n            }\n\n            if (this.multiple) {\n                return this.chooseForMultiple(value);\n            }\n\n            this.value = (this.optional && this.value === value)\n                ? null\n                : value;\n\n            this.closeMenu();\n        },\n\n        // This feels really hacky, and should probably be re-visited at some point...\n        shouldChoose(value, $event = null) {\n            if (! this.needsHiddenInput || ! $event) {\n                return true;\n            }\n\n            const lastEvent = window.sessionStorage.getItem(`cs-${this.selectId}-last-event`);\n\n            if (window.sessionStorage.getItem(`cs-${this.selectId}-cleared`) !== null) {\n                window.sessionStorage.removeItem(`cs-${this.selectId}-cleared`);\n                window.sessionStorage.setItem(`cs-${this.selectId}-temp-selected`, JSON.stringify([]));\n            }\n\n            if (lastEvent !== String($event.timeStamp)) {\n                window.sessionStorage.setItem(`cs-${this.selectId}-last-event`, String($event.timeStamp));\n\n                return true;\n            }\n\n            let selected = JSON.parse(\n                window.sessionStorage.getItem(`cs-${this.selectId}-selected`) || JSON.stringify([])\n            );\n\n            if (window.sessionStorage.getItem(`cs-${this.selectId}-temp-selected`) !== null) {\n                selected = selected.filter(o => o === value);\n\n                window.sessionStorage.removeItem(`cs-${this.selectId}-temp-selected`);\n                window.sessionStorage.setItem(`cs-${this.selectId}-selected`, JSON.stringify(selected));\n            }\n\n            this.value = [];\n            this.value = selected;\n\n            return false;\n        },\n\n        closeMenu() {\n            this.open = false;\n            this.focusButton();\n        },\n\n        onOptionSelect() {\n            if (this.currentIndex < 0) {\n                return;\n            }\n\n            const option = this.options[this.currentIndex];\n\n            if (option && ! option.disabled) {\n                this.choose(option.value);\n            }\n        },\n\n        // Excludes any \"optgroup\" elements\n        optionChildren() {\n            if (! this.$refs.menu) {\n                return [];\n            }\n\n            return Array.from(this.$refs.menu.children)\n                .filter(child => child.classList.contains('custom-select--option'));\n        },\n\n        updateDisplay(value) {\n            if (! value) {\n                return this.display = this.placeholderMarkup;\n            }\n\n            this.$nextTick(() => {\n                if (this.multiple) {\n                    return this.updateDisplayForMultiple(value);\n                }\n\n                const $li = this.optionChildren()[this.optionIndex(value)];\n                this.display = $li\n                    ? $li.children[0].innerHTML\n                    : this.placeholderMarkup;\n            });\n        },\n\n        updateDisplayForMultiple(value) {\n            const length = value.length;\n            if (length === 0) {\n                this.previousDisplay = '';\n\n                return this.display = this.placeholderMarkup;\n            }\n\n            const $li = this.optionChildren()[this.optionIndex(value[0])];\n\n            if (! $li && ! this.previousDisplay) {\n                return this.display = `${length} Selected`;\n            }\n\n            let display = $li ? $li.children[0].innerHTML : this.previousDisplay;\n            this.previousDisplay = display;\n            if ((length - 1) > 0) {\n                display += `<span class=\"text-xs text-cool-gray-500 flex items-center\">+ ${length - 1}</span>`;\n            }\n\n            this.display = display;\n        },\n\n        optionIndex(value) {\n            return this.options.findIndex(o => o.value === String(value));\n        },\n\n        onMouseEnter(value) {\n            this.selected = value;\n            this.currentIndex = this.optionIndex(value);\n        },\n\n        onSelectedChanged(value) {\n            if (! this.open) {\n                return;\n            }\n\n            const index = this.optionIndex(value);\n\n            if (index < 0) {\n                return;\n            }\n\n            this.$nextTick(() => {\n                const $li = this.optionChildren()[index];\n\n                if (! $li) {\n                    return;\n                }\n\n                const filterHasFocus = this.filterable\n                    && document.activeElement === this.$refs.filter;\n\n                $li.focus();\n\n                if (filterHasFocus) {\n                    this.focusFilter();\n                }\n            });\n        },\n\n        onArrowUp() {\n            // If no enabled options, just return...\n            if (this.enabledLength === 0) {\n                this.currentIndex = -1;\n                this.selected = null;\n\n                return;\n            }\n\n            let prevIndex = findLastIndex(this.options, (o, index) => ! o.disabled && ! o.hidden && index < this.currentIndex);\n            if (prevIndex < 0) {\n                prevIndex = findLastIndex(this.options, o => ! o.disabled && ! o.hidden);\n            }\n\n            this.currentIndex = prevIndex;\n            this.selected = this.options[this.currentIndex].value;\n        },\n\n        onArrowDown() {\n            // If no enabled options, just return...\n            if (this.enabledLength === 0) {\n                this.currentIndex = -1;\n                this.selected = null;\n\n                return;\n            }\n\n            let nextIndex = this.options.findIndex((o, index) => index > this.currentIndex && ! o.disabled && ! o.hidden);\n            if (nextIndex === -1 || (nextIndex + 1) > this.options.length) {\n                nextIndex = this.options.findIndex(o => ! o.disabled && ! o.hidden);\n            }\n\n            this.currentIndex = nextIndex;\n            this.selected = this.options[this.currentIndex].value;\n        },\n\n        onHome() {\n            // If no enabled options, just return...\n            if (this.enabledLength === 0) {\n                this.currentIndex = -1;\n                this.selected = null;\n\n                return;\n            }\n\n            this.currentIndex = this.options.findIndex(o => ! o.disabled && ! o.hidden);\n            this.selected = this.options[this.currentIndex].value;\n        },\n\n        onEnd() {\n            // If no enabled options, just return...\n            if (this.enabledLength === 0) {\n                this.currentIndex = -1;\n                this.selected = null;\n\n                return;\n            }\n\n            this.currentIndex = findLastIndex(this.options, o => ! o.disabled && ! o.hidden);\n            this.selected = this.options[this.currentIndex].value;\n        },\n\n        focusButton() {\n            this.$nextTick(() => this.$refs.button.focus());\n        },\n\n        focusFilter() {\n            this.$nextTick(() => this.$refs.filter && this.$refs.filter.focus());\n        },\n\n        focusMenu() {\n            this.$nextTick(() => this.$refs.menu && this.$refs.menu.focus());\n        },\n\n        onShiftTab() {\n            if (this.filterable) {\n                this.focusFilter();\n            } else {\n                this.closeMenu();\n            }\n        },\n\n        highlightSelectedOption() {\n            if (this.multiple) {\n                this.currentIndex = this.optionIndex(this.value[0]);\n            } else {\n                this.currentIndex = this.value\n                    ? this.optionIndex(this.value)\n                    : 0;\n            }\n\n            // Let's focus the first option if none of them are selected.\n            if (this.currentIndex < 0 && this.enabledLength > 0) {\n                this.currentIndex = 0;\n            }\n\n            this.selected = this.currentIndex > -1\n                ? this.options[this.currentIndex].value\n                : null;\n        },\n\n        toggle() {\n            this.open = ! this.open;\n\n            this.open && this.openMenu();\n        },\n\n        openMenu() {\n            if (! this.$refs.container || ! this.$refs.menu) {\n                // Keep trying to perform these steps until the element appears...\n                setTimeout(() => this.openMenu(), 250);\n\n                return;\n            }\n\n            this.$nextTick(() => {\n                this.positionMenu();\n                this.refreshOptionsIfNeeded();\n            });\n\n            this.highlightSelectedOption();\n            this[this.filterable ? 'focusFilter' : 'focusMenu']();\n        },\n\n        // Note: this seems like a dirty hack for when wire:model is used on the select\n        // and probably should be revisited in the future to see how we can\n        // prevent each option from losing its id and data-index attributes.\n        refreshOptionsIfNeeded() {\n            const children = this.optionChildren();\n\n            if (! children.length || ! children[0].getAttribute('id')) {\n                this.options = this.parseOptions();\n            }\n        },\n\n        positionMenu() {\n            if (! this.$refs.container) {\n                // Try again later...\n                setTimeout(() => this.positionMenu(), 250);\n\n                return;\n            }\n\n            if (this.fixedPosition) {\n                this.positionFixedMenu();\n\n                return;\n            }\n\n            this.$refs.container.classList.remove('custom-menu-top');\n\n            // give a little bit of breathing room at the bottom of the screen.\n            const tolerance = 10;\n            const menuHeight = this.$refs.menu.offsetHeight;\n            const largestHeight = window.innerHeight - menuHeight - tolerance;\n\n            const { top } = this.$refs.menu.getBoundingClientRect();\n\n            if (top > largestHeight) {\n                this.$refs.container.classList.add('custom-menu-top');\n            }\n        },\n\n        positionFixedMenu() {\n            // So we can accurately determine where it should be placed...\n            this.$refs.container.style.position = 'absolute';\n            this.$refs.container.style.top = null;\n\n            const { width, left: buttonLeft, top: buttonTop } = this.$refs.button.getBoundingClientRect();\n\n            // give a little bit of breathing room at the bottom of the screen.\n            const tolerance = 10;\n            const menuHeight = this.$refs.menu.offsetHeight;\n            const largestHeight = window.innerHeight - menuHeight - tolerance;\n\n            const { top } = this.$refs.menu.getBoundingClientRect();\n\n            if (top > largestHeight) {\n                const menuTop = buttonTop - menuHeight - tolerance;\n                this.$refs.container.style.top = `${menuTop}px`;\n            } else {\n                this.$refs.container.style.top = `${top}px`;\n            }\n\n            this.$refs.container.style.position = 'fixed';\n            this.$refs.container.style.width = `${width}px`;\n            this.$refs.container.style.left = `${buttonLeft}px`;\n        },\n    };\n}\n"],"names":["array","predicate","l","length","window","customSelect","state","display","options","currentIndex","query","previousDisplay","needsHiddenInput","this","selectId","multiple","value","Boolean","filter","o","disabled","hidden","placeholder","init","$watch","$refs","container","menu","parseOptions","Array","isArray","updateDisplay","_this","$nextTick","onSelectedChanged","undefined","wireFilter","setTimeout","optionsToHide","String","toLowerCase","includes","text","map","_this2","optionIndex","from","children","forEach","child","index","Number","dataset","classList","add","remove","contains","setAttribute","_this3","JSON","parse","option","isChosen","some","v","chooseForMultiple","optional","splice","indexOf","push","setHiddenInputSelection","closeMenu","sessionStorage","setItem","stringify","clear","_this4","choose","removeItem","$event","shouldChoose","lastEvent","getItem","timeStamp","selected","open","focusButton","onOptionSelect","optionChildren","placeholderMarkup","_this5","updateDisplayForMultiple","$li","innerHTML","findIndex","onMouseEnter","_this6","filterHasFocus","filterable","document","activeElement","focus","focusFilter","onArrowUp","enabledLength","prevIndex","findLastIndex","_this7","onArrowDown","nextIndex","_this8","onHome","onEnd","_this9","button","_this10","focusMenu","_this11","onShiftTab","highlightSelectedOption","toggle","openMenu","_this12","positionMenu","refreshOptionsIfNeeded","getAttribute","fixedPosition","positionFixedMenu","menuHeight","offsetHeight","largestHeight","innerHeight","getBoundingClientRect","top","_this13","style","position","width","buttonLeft","left","buttonTop","menuTop"],"mappings":"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"}